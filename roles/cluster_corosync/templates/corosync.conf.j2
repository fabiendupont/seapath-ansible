# Copyright (C) 2024, RTE (http://www.rte-france.com)
# SPDX-License-Identifier: Apache-2.0

system {
  sched_rr: no
  priority: -20
}
totem {
	version: 2
        netmtu: {{ corosync_netmtu }}
        vsftype: {{ corosync_vsftype }}
        transport: {{ corosync_transport }}
        cluster_name: {{ corosync_cluster_name }}
        ip_version: {{ corosync_ip_version }}
	token: {{ corosync_token }}
        authkey: /etc/corosync/authkey
	interface {
		ringnumber: 0
	}
}

nodelist {
{% for node in corosync_node_list %}
	node {
		ring0_addr: {{ node }}
		nodeid: {{ loop.index }}
	}
{% endfor %}
}

quorum {
        provider: corosync_votequorum
}

logging {
        timestamp: off
        fileline: off
        function_name: off
        to_stderr: on
        to_logfile: off
        to_syslog: on
        logfile_priority: info
        syslog_facility: daemon
        syslog_priority: info
        debug: off
        logger_subsys {
                subsys: QUORUM
                debug: off
        }
}

qb {
        ipc_type: native
}
